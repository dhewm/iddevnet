<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="robots" content="index,nofollow">

<title>LevelEditor Troubleshooting - Quake 4 SDK Documentation</title>
<script type="text/javascript" src="wiki/common/js/common.js"></script>

<script type="text/javascript">
<!--// common functions

// We keep here the state of the search box
searchIsDisabled = false;

function searchChange(e) {
    // Update search buttons status according to search box content.
    // Ignore empty or whitespace search term.
    var value = e.value.replace(/\s+/, '');
    if (value == '' || searchIsDisabled) { 
        searchSetDisabled(true);
    } else {
        searchSetDisabled(false);
    }
}

function searchSetDisabled(flag) {
    // Enable or disable search
    document.getElementById('fullsearch').disabled = flag;
    document.getElementById('titlesearch').disabled = flag;
}

function searchFocus(e) {
    // Update search input content on focus
    if (e.value == 'Search') {
        e.value = '';
        e.className = '';
        searchIsDisabled = false;
    }
}

function searchBlur(e) {
    // Update search input content on blur
    if (e.value == '') {
        e.value = 'Search';
        e.className = 'disabled';
        searchIsDisabled = true;
    }
}

function actionsMenuInit(title) {
    // Initialize action menu
    for (i = 0; i < document.forms.length; i++) {
        var form = document.forms[i];
        if (form.className == 'actionsmenu') {
            // Check if this form needs update
            var div = form.getElementsByTagName('div')[0];
            var label = div.getElementsByTagName('label')[0];
            if (label) {
                // This is the first time: remove label and do buton.
                div.removeChild(label);
                var dobutton = div.getElementsByTagName('input')[0];
                div.removeChild(dobutton);
                // and add menu title
                var select = div.getElementsByTagName('select')[0];
                var item = document.createElement('option');
                item.appendChild(document.createTextNode(title));
                item.value = 'show';
                select.insertBefore(item, select.options[0]);
                select.selectedIndex = 0;
            }
        }
    }
}
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="wiki/modern/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="wiki/modern/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="wiki/modern/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="wiki/modern/css/projection.css">

<!-- css only for MSIE browsers -->
<!--[if IE]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="wiki/modern/css/msie.css">
<![endif]-->



<link rel="Start" href="./Quake4SDK">
<link rel="Alternate" title="Wiki Markup" href="./LevelEditor_Troubleshooting?action=raw">
<link rel="Alternate" media="print" title="Print View" href="./LevelEditor_Troubleshooting?action=print">
<link rel="Search" href="./FindPage">
<link rel="Index" href="./TitleIndex">
<link rel="Glossary" href="./WordIndex">
<link rel="Help" href="./HelpOnFormatting">
</head>

<body  lang="en" dir="ltr">

<div id="header">
<div id="logo"><a href="./Quake4SDK"><img src="wiki/common/moinmoin.png" alt="MoinMoin Logo"></a></div>

<form id="searchform" method="get" action="">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput">Search:</label>
<input id="searchinput" type="text" name="value" value="" size="20"
    onfocus="searchFocus(this)" onblur="searchBlur(this)"
    onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search">
<input id="titlesearch" name="titlesearch" type="submit"
    value="Titles" alt="Search Titles">
<input id="fullsearch" name="fullsearch" type="submit"
    value="Text" alt="Search Full Text">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<ul id="username"><li><a href="./LevelEditor_Troubleshooting?action=login" id="login">Login</a></li></ul>
<div id="locationline">


<ul id="pagelocation">
<li><a class="backlink" title="Click to do a full-text search for this title" href="./LevelEditor_Troubleshooting?action=fullsearch&amp;value=linkto%3A%22LevelEditor+Troubleshooting%22&amp;context=180">LevelEditor Troubleshooting</a></li>
</ul>

</div>


<ul id="navibar">
<li class="wikilink"><a href="./GettingStarted">GettingStarted</a></li><li class="wikilink"><a href="./ScriptFile">ScriptFile</a></li><li class="wikilink"><a href="./MakeAMod">MakeAMod</a></li><li class="wikilink"><a href="./LevelEditor">LevelEditor</a></li><li class="wikilink"><a href="./FXEditor">FXEditor</a></li><li class="wikilink"><a href="./GUIEditor">GUIEditor</a></li><li class="wikilink"><a href="./Sounds">Sounds</a></li><li class="wikilink"><a href="./Animations">Animations</a></li><li class="wikilink"><a href="./ArtReference">ArtReference</a></li><li class="wikilink"><a href="./DownloadableContent">DownloadableContent</a></li><li class="wikilink"><a href="./RecentChanges">RecentChanges</a></li><li class="wikilink"><a href="./FindPage">FindPage</a></li><li class="wikilink"><a href="./HelpContents">HelpContents</a></li><li class="current"><a href="./LevelEditor_Troubleshooting">LevelEditor...bleshooting</a></li>
</ul>

<div id="pageline"><hr style="display:none;"></div>

<ul class="editbar"><li><span class="disabled">Immutable Page</span></li><li><a href="./LevelEditor_Troubleshooting?action=info">Info</a></li><li><a href="./LevelEditor_Troubleshooting?action=AttachFile">Attachments</a></li><li>
<form class="actionsmenu" method="get" action="">
<div>
    <label>More Actions:</label>
    <select name="action"
        onchange="if ((this.selectedIndex != 0) &&
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="raw">Raw Text</option>
<option value="print">Print View</option>
<option value="RenderAsDocbook">Render as Docbook</option>
<option value="refresh">Delete Cache</option>
<option value="show" disabled class="disabled">------------</option>
<option value="SpellCheck">Check Spelling</option>
<option value="LikePages">Like Pages</option>
<option value="LocalSiteMap">Local Site Map</option>
<option value="show" disabled class="disabled">------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------</option>
<option value="MyPages">My Pages</option>
<option value="SubscribeUser">Subscribe User</option>
<option value="show" disabled class="disabled">------------</option>
<option value="Despam">Remove Spam</option>
<option value="PackagePages">Package Pages</option>
    </select>
    <input type="submit" value="Do">
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line867">
<h1 id="head-d44bf1a5baef306a229db812d76578aea4ea817a">Editor Troubleshooting</h1>
<span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><p class="line874">As much as we all love making maps, the process is not without its fair share of pain. Here's a list of some known issues and how to fix, work around, or just plain deal with them. <span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><p class="line874">This list will grow and change over time as additional issues are reported and/or fixed. <span class="anchor" id="line-6"></span><hr /><p class="line874"> <span class="anchor" id="line-7"></span><strong>Why isn't my map saving my changes?</strong> <span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><p class="line862">(<em>This issue has been addressed in the 1.0.4 patch, please patch to this version or newer to fix.</em>) <span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><p class="line874">If unpatched, testing a multiplayer map with the "spawnserver" console command will flag your .map file as read-only. We recommend that you avoid running additional copies of the game or using "spawnserver" from F2 instances when developing multiplayer levels. If you absolutely must keep two copies running at once, keep your working file in another path (e.g. maps/mp/work/ instead of just maps/mp/) and copy your compiles into the desired location for testing (this is usually how we arranged our map files during development and why the issue was not caught sooner) <span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><p class="line874">If you do load your map and discover you've lost work, immediately quit the editor without saving and locate the [mapname].tmp file in your maps folder. This .tmp file is a backup of the map file written when you save the map. You can change the extension back to .map and recover your changes up to the most recent save. <span class="anchor" id="line-14"></span><hr /><p class="line874"> <span class="anchor" id="line-15"></span><strong>When I load the editor, my grid and camera views are solid white and don't show anything!</strong> <span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><p class="line874">Try restarting the editor once for good measure; this is sometimes a random occurrence. If that doesn't work, odds are anti-aliasing settings in the game are interfering with the editor. Add +set r_multisamples 0 to your editor command line. You can keep it enabled in the game by adding the r_multisamples command set to your preferred level of AA on your game shortcut. <span class="anchor" id="line-18"></span><hr /><p class="line874"> <span class="anchor" id="line-19"></span><strong>My editor runs really really slow and crashes sometimes. The game runs fine. Is there anything I can do?</strong> <span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span><p class="line874">Even on high-end machines, the editor can be far more of a performance hog than in the game. Here's a few points to look at. Most of these apply to single player, as multiplayer levels are much simpler, but your milage will vary based on system spec. <span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><p class="line862">Keep in mind that the elements of the game that make things run well, such as backface culling on compile and VIS calculations (portals) are <em>not</em> calculated in the editor. Rendered previews in particular can bring your system to its knees if you're not careful. A single brush could cast up to 6x the shadow triangles it would normally <em>per light</em>! <span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><ul><li><p class="line891"><span class="u">Cubic Clipping</span>: Enable cubic clipping by pressing Ctrl+\. This will cut off rendering at a finite distance in the camera and rendered views. You can adjust the clip distance by pressing Ctrl+] and Ctrl+[. Rendering the camera view on a typical single player level with no cubic clipping will often crash the editor. <span class="anchor" id="line-26"></span></li><li><p class="line891"><span class="u">Grid</span>: When you load a map fresh and experience stuttering in the grid view, you can usually gain some speed back by zooming out to view the entire level, then zooming back in to a working range. This gets everything in the map into memory and can help get rid of stutters as the editor tries to keep up with your grid movement. <span class="anchor" id="line-27"></span></li><li><p class="line891"><span class="u">Regions</span>: Working in regions minimizes the amount of the level being drawn and also keeps your level manageable as it grows. Keep small regions where possible when testing/rendering lighting. <span class="anchor" id="line-28"></span></li><li><p class="line891"><span class="u">Patches/Models</span>: Patch meshes and models can eat up a lot of performance when used heavily; if you're not actively modifying them you can speed things up by not drawing them (Ctrl+P and Ctrl+Alt+M respectively). <span class="anchor" id="line-29"></span></li></ul><p class="line867"><hr /><p class="line874"> <span class="anchor" id="line-30"></span><strong>My map runs really slow when I'm in the editor.</strong> <span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><p class="line874">Remember from the previous entry that the editor can be a massive performance hog. When running the game from an F2 instance, you can expect to see drastic FPS drops compared to a normal copy of the game. A second copy of the game will run better, but still slower than with no editor in the background. <span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><p class="line862">If you use two monitors, you may also see significant performance drops depending on your hardware - designers at Raven noticed up to 10fps in some cases. Bottom line - only trust your performance in a full screen, single monitor setting. For optimizing your level where necessary, check our <a href="./LevelEditor_Performance">Performance Guide</a>. <span class="anchor" id="line-35"></span><hr /><p class="line874"> <span class="anchor" id="line-36"></span><strong>I see some weird flickering in my level.</strong> <span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><p class="line874">Flickering or z-fighting can occur when two faces overlap on the same plane. First, check that you don't have any duplicate brushes or any overlapping into each other. Some inlined models show shadow-related z-fighting and need to be fixed by removing the "inline" key. <span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><p class="line874">You may also see z-fighting on decals at long range. The Z-buffer gets less precise over distance, so in large scenes you may need to float decal/detail patch meshes further off surfaces to keep the proper sorting. <span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><p class="line874">One much more obscure instance occurs when a light's center lies coplanar with a face - shadows will z-fight across any such surfaces. If you think this might be the case, check your nearby lights and light centers. This typically occurs when you have an angled surface and just happen to move a nearby light center to a planar location. <span class="anchor" id="line-43"></span><hr /><p class="line874"> <span class="anchor" id="line-44"></span><strong>When I render my camera view in the editor, I see weird things happening to the shadows as I move around. What did I do wrong?</strong> <span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><p class="line874">In most cases, you've done nothing wrong at all. Shadows will occasionally act strangely when rendered in the editor; you may see flickering and odd shapes as you move through the map. You should only be worried if you observe any strange behavior when running a compiled map in the game. <span class="anchor" id="line-47"></span><hr /><p class="line874"> <span class="anchor" id="line-48"></span><strong>You've mentioned running additional copies of the game a couple times, but when I try this it only loads one. What gives?</strong> <span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><p class="line862">By default, Quake only allows a single instance. If, however, you have a high-end system and feel daring, you can run two copies at once and jump between them to use the <a href="./LevelEditor">LevelEditor</a> and test in the game (or even to use the <a href="./FXEditor">FXEditor</a>, Model Viewer, etc.). This gives some improved functionality and performance over the F2 method, but is not for all users. <span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span><p class="line874">To do so, add the parameter "+set win_allowMultipleInstances 1" on your shortcut. Running the game multiple times will now launch multiple instances. <span class="anchor" id="line-53"></span><hr /><p class="line874"> <span class="anchor" id="line-54"></span><strong>When I try to compile, I get an error message reading: "WARNING: Couldn't load map file: [map path/map name]" How can I fix this?</strong> <span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span><p class="line874">Quake requires that your .map files be placed in the q4base/maps/ folder (or the mymod/maps/ folder if editing within a mod) to compile. Check that your .map file is in the correct location. If this path does not exist, create a new folder "maps" under q4base. <span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span><p class="line874">Currently the path is also case sensitive, so q4base/Maps/ will cause the same error. If you have a "Maps" folder, change the capitalization so it reads "maps" to fix the issue. <span class="anchor" id="line-59"></span><span class="anchor" id="bottom"></span></div><p id="pageinfo" class="info" lang="en" dir="ltr">LevelEditor Troubleshooting  (last edited 2006-01-01 21:24:13 by <span title="AndrewWeldon @ 24-240-36-51.dhcp.mdsn.wi.charter.com[24.240.36.51]"><a class="nonexistent" href="./AndrewWeldon" title="AndrewWeldon @ 24-240-36-51.dhcp.mdsn.wi.charter.com[24.240.36.51]">AndrewWeldon</a></span>)</p>

<div id="pagebottom"></div>
</div>


<div id="footer">
<ul class="editbar"><li><span class="disabled">Immutable Page</span></li><li><a href="./LevelEditor_Troubleshooting?action=info">Info</a></li><li><a href="./LevelEditor_Troubleshooting?action=AttachFile">Attachments</a></li><li>
<form class="actionsmenu" method="get" action="">
<div>
    <label>More Actions:</label>
    <select name="action"
        onchange="if ((this.selectedIndex != 0) &&
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="raw">Raw Text</option>
<option value="print">Print View</option>
<option value="RenderAsDocbook">Render as Docbook</option>
<option value="refresh">Delete Cache</option>
<option value="show" disabled class="disabled">------------</option>
<option value="SpellCheck">Check Spelling</option>
<option value="LikePages">Like Pages</option>
<option value="LocalSiteMap">Local Site Map</option>
<option value="show" disabled class="disabled">------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------</option>
<option value="MyPages">My Pages</option>
<option value="SubscribeUser">Subscribe User</option>
<option value="show" disabled class="disabled">------------</option>
<option value="Despam">Remove Spam</option>
<option value="PackagePages">Package Pages</option>
    </select>
    <input type="submit" value="Do">
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

<ul id="credits">
<li><a href="http://moinmoin.wikiwikiweb.de/">MoinMoin Powered</a></li><li><a href="http://www.python.org/">Python Powered</a></li><li><a href="http://validator.w3.org/check?uri=referer">Valid HTML 4.01</a></li>
</ul>


</div>
</body>
</html>

